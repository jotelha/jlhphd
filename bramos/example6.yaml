fws:
- fw_id: 1
  name: "Replicate"
  spec:
    _category: "bwcloud_noqueue"
    _tasks:
    - _fw_name: GetFilesTask
      identifiers: 
      - au_cell_P1_111.gro
    - _fw_name: ScriptTask
      script: module load Fireworks; module load GROMACS/2018.1-gnu-7.3-openmpi-2.1.1; module load MDTools; replicate.sh 21 12 1 111
    - _fw_name: AddFilesTask
      identifiers: 
      - AU_111_21x12x1.pdb
      paths: 
      - AU_111_21x12x1.pdb
      compress: True
    - _fw_name: PyTask
      func: fwtools.testuser.get_dimensions
      inputs: [ ]
      outputs: [dimensions]
     
- fw_id: 2
  name: "Surfactants"
  spec:
    _category: "bwcloud_noqueue"
    _tasks:
    - _fw_name: PyTask
      func: fwtools.testuser.get_surfactants
      inputs: [dimensions, surfactants]
      outputs: [dim_surf]
    surfactants: ["SDS"]

- fw_id: 3
  name: "Preassembly"
  spec:
    _category: "bwcloud_noqueue"
    _tasks:
    - _fw_name: PyTask
      func: fwtools.testuser.get_preassembly
      inputs: [dim_surf, preassembly]
      outputs: [dim_surf_asb]
    preassembly: ["cylinders_with_counterion"]
 
- fw_id: 4
  name: "Aggregates"
  spec:
    _category: "bwcloud_noqueue"
    _tasks:
    - _fw_name: PyTask
      func: fwtools.testuser.get_inputs_single
      inputs: [dim_surf_asb, sf_nmolecules,counterion,sb_unit]
      outputs: [inputs]
    sf_nmolecules: "110"
    counterion: "NA"
    sb_unit: ['3e-10', '5e-10', '7e-10']
 
- fw_id: 5
  name: "Packmol"
  spec:
    _category: "bwcloud_noqueue"
    _tasks:
    - _fw_name: PyTask
      func: fwtools.testuser.run_packmol
      inputs: [inputs,nloop,maxit]
      outputs: []
    nloop: 200
    maxit: 500
      
  
links:
  '1': 2
  '2': 3
  '3': 4
  '4': 5
  
metadata: {inputs}
name: Workflow