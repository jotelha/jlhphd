{% extends "fw_base.yaml" %}
{% block body %}
name: {{machine}}, transfer '{{identifier}}' data to file pad
spec:
  _category: "{{ worker|default("nemo_noqueue",true) }}"
  _files_in:
    data_file:            default.lammps
    filtered_traj_file:   filtered.nc
    indenter_x_forces:    indenter_x_forces.txt
    indenter_y_forces:    indenter_y_forces.txt
    indenter_z_forces:    indenter_z_forces.txt
    #joint_traj_file:     default.nc
    joint_thermo_file:    thermo.out
    joint_ave_file:       thermo_ave.out
    log_file:             log.lammps
    ndx_file:             groups.ndx
  _tasks:
  # first delete if file existent
  - _fw_name: DeleteFilesTask
    identifiers:
    - {{ identifier }}/default.lammps
    - {{ identifier }}/filtered.nc
    - {{ identifier }}/groups.ndx
    - {{ identifier }}/indenter_x_forces.txt
    - {{ identifier }}/indenter_y_forces.txt
    - {{ identifier }}/indenter_z_forces.txt
    - {{ identifier }}/log.lammps
    - {{ identifier }}/thermo.out
  # then add again:
  - _fw_name: AddFilesTask
    identifiers:
    - {{ identifier }}/default.lammps
    - {{ identifier }}/filtered.nc
    - {{ identifier }}/groups.ndx
    - {{ identifier }}/indenter_x_forces.txt
    - {{ identifier }}/indenter_y_forces.txt
    - {{ identifier }}/indenter_z_forces.txt
    - {{ identifier }}/log.lammps
    - {{ identifier }}/thermo.out
    paths:
    - default.lammps
    - filtered.nc
    - groups.ndx
    - indenter_x_forces.txt
    - indenter_y_forces.txt
    - indenter_z_forces.txt
    - log.lammps
    - thermo.out
    metadata:
      state: AFM probe sheared
      {{ render_metadata()|indent(6)}}
  metadata:
    state: file transfer to filepad
    {{ render_metadata()|indent(4)}}
{% endblock %}
