{% extends "fw_base.yaml" %}
{% block body %}
name: {{machine}}, {{ title }}, transfer '{{identifier}}' data to file pad
spec:
  _category: "{{ worker|default("nemo_noqueue",true) }}"
  _files_in:
    ave_file:     thermo_ave.out
    data_file:    default.lammps
    log_file:     log.lammps
    thermo_out:   thermo.out

    box_measures: box.txt
    rdf:          rdf.txt
    fcc_rdf:      fcc_rdf.txt

  _tasks:
  # first delete if file existent
  - _fw_name: DeleteFilesTask
    identifiers:
    - {{ identifier }}/thermo_ave.out
    - {{ identifier }}/default.lammps
    - {{ identifier }}/log.lammps
    - {{ identifier }}/thermo.out
    - {{ identifier }}/box.txt
    - {{ identifier }}/rdf.txt
    - {{ identifier }}/fcc_rdf.txt
  # then add again:
  - _fw_name: AddFilesTask
    identifiers:
    - {{ identifier }}/thermo_ave.out
    - {{ identifier }}/default.lammps
    - {{ identifier }}/log.lammps
    - {{ identifier }}/thermo.out
    - {{ identifier }}/box.txt
    - {{ identifier }}/rdf.txt
    - {{ identifier }}/fcc_rdf.txt
    paths:
    - thermo_ave.out
    - default.lammps
    - log.lammps
    - thermo.out
    - box.txt
    - rdf.txt
    - fcc_rdf.txt
    metadata:
      state: minimized, nvt- and npt-equilibrated with eam potential
      {{ render_metadata()|indent(6)}}
  metadata:
    state: file transfer to filepad
    {{ render_metadata()|indent(4)}}
{% endblock %}
