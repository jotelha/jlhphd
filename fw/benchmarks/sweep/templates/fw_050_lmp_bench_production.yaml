name: "{{ machine|default("NEMO",true) }} LAMMPS benchmark, PPME accuracy {{ ewald_accuracy }}, Coulomb cutoff {{ coulomb_cutoff }}, skin distance {{ skin_distance }}, neigh delay {{ neigh_delay }}, neigh every {{ neigh_every }}, {{ nodes|default(1,true)|int }} nodes, {{ ppn|default(20,true)|int }} ppn, 1000 steps, thermo output every 100 steps, no group/group computes"
spec:
  _category: {{ worker|default("nemo_queue_offline",true) }}
  _queueadapter:
    nodes:    {{ nodes|default(1,true)|int }}
    ppn:      {{ ppn|default(20,true)|int }}
    queue:    {{ queue|default("express",true) }}
    walltime: {{ walltime|default("00:15:00") }}
  _files_in:
    data_file:                  datafile.lammps
    input_header:               lmp_header.input
    input_production:           lmp_production.input
    input_production_2:         lmp_production_mixed.input
  _files_out:
    log_file:                   log.lammps
  _tasks:

  - _fw_name: CmdTask
    cmd: lmp
    opt:
    - -in lmp_production.input
    - -v constant_indenter_velocity -0.0001
    - -v compute_interactions     0
    - -v dataFile                 datafile.lammps
    - -v freeze_substrate         0
    - -v has_indenter             1
    - -v indenter_nve_noforce     1
    - -v mpiio                    1
    - -v netcdf_frequency         10000
    - -v nptEqSteps               10000
    - -v pbc2d                    0
    - -v temperatureT             {{ temperature|default(298.0)|float }}
    - -v pressureP                {{ pressure|default(0.0,true)|float }}
    - -v productionSteps          1000
    - -v reinitialize_velocities  0
    - -v restart_frequency        10000
    - -v store_forces             1
    - -v surfactant_name          {{ surfactant|default("SDS") }}
    - -v thermo_frequency         100
    - -v use_colvars              0
    - -v use_eam                  0
    - -v use_ewald                1
    - -v ewald_accuracy           {{ewald_accuracy}}
    - -v coulomb_cutoff           {{coulomb_cutoff}}
    - -v skin_distance            {{skin_distance}}
    - -v neigh_delay              {{neigh_delay}}
    - -v neigh_every              {{neigh_every}}
    - -v neigh_check              {{neigh_check}}

    stderr_file:    std.err
    stdout_file:    std.out
    store_stdout:   true
    store_stderr:   true
    use_shell:      true
    fizzle_bad_rc:  true
  _trackers:
  - filename: log.lammps
    nlines:   25
  step: {{ machine|default("NEMO",true) }}, {{ nodes|default(1,true)|int }} nodes, {{ ppn|default(20,true)|int }} ppn LAMMPS benchmak
