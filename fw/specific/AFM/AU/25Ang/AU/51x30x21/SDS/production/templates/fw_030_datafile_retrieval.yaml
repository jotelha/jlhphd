{% extends "fw_base.yaml" %}
{% block body %}
name: "{{ machine|default("NEMO",true) }}, {{ title }}, AFM force-distance curve initial configuration data files retrieval"
spec:
  _category: {{ worker|default("nemo_noqueue",true) }}
  _files_out:
    data_file: datafile.lammps
    ndx_file:  groups.ndx

  _tasks:

  - _fw_name: GetFilesByQueryTask
    query:
      metadata:
        surfactant:       {{ surfactant }}
        sf_preassembly:   {{ sf_preassembly }}
        sf_nmolecules:    {{ sf_nmolecules }}
        counterion:       {{ counterion }}
        solvent:          {{ solvent }}
        substrate:        {{ substrate }}
        sb_crystal_plane: {{ sb_crystal_plane }}
        sb_multiples:     {{ sb_multiples }}

        indenter:
          substrate:      {{ substrate }}
          initial_radius: {{ initial_radius }}
          initial_radius_unit: {{ initial_radius_unit }}

        sb_in_dist:      {{ sb_in_dist }}
        sb_in_dist_unit: {{ sb_in_dist_unit }}
  
        state: "minimized, nvt- and npt-equilibrated with eam potential after indenter inserion"

  metadata:
    state: "production initial configuration data files"
    {{ render_metadata()|indent(4)}}
{% endblock %}
