name: "JUWELS extract forces from NetCDF"
spec:
  _category: "juwels_noqueue"
  _allow_fizzled_parents: True
  _files_in:
    joint_traj_file:       default.nc # from previous post-processing task
    joint_thermo_file:     thermo.out
    joint_ave_file:        thermo_ave.out

  _files_out:
    indenter_forces:       indenter_z_forces.txt
    nonindenter_forces:    nonindenter_z_forces.txt

  _tasks:
  - _fw_name: CmdTask
    cmd: extract_indenter_nonindenter_forces_from_netcdf.py
    opt:
    - --element Au
    - --dim 2
    - --plane 20.0
    - --netcdf-output-interval 10000
    - --output-formats txt
    - --verbose
    - default.nc # input file
    - indenter_z_forces # output file name without extension
    - nonindenter_z_forces
    stderr_file:   std.err
    stdout_file:   std.out
    fizzle_bad_rc: true
    use_shell:     true
